---
title: 函数柯里化
date: 2020-01-03 23:46:08
tags: js
---
柯里化的定义，接收一部分参数，返回一个函数接收剩余参数，接收足够参数后，执行原函数。
我们已经知道了，当柯里化函数接收到足够参数后，就会执行原函数，那么我们如何去确定何时达到足够的参数呢？

<!-- more -->

我们有两种思路
1.通过函数的length属性，获取函数的形参个数，形参的个数就是所需的参数个数;
2.在调用柯里化工具函数时，手动指定所需的参数个数。

    /**
     * 将函数柯里化
     * @param fn    待柯里化的原函数
     * @param len   所需的参数个数，默认为原函数的形参个数
     */
    function curry(fn, len = fn.length) {
        return _curry.call(this, fn, len)
    }
    
    /**
     * 中转函数
     * @param fn    待柯里化的原函数
     * @param len   所需的参数个数
     * @param args  已接收的参数列表
     */
    function _curry(fn, len, ...args) {
        return function (...params) {
            let _args = [...args, ...params];
            if(_args.length >= len){
                return fn.apply(this, _args);
            }else{
                return _curry.call(this, fn, len, ..._args)
            }
        }
    }
    
    // 测试
    function fn(a,b,c,d,e) {
        console.log(a,b,c,d,e)
    }
    let _fn = curry(fn);
    _fn(1,2,3,4,5);     // print: 1,2,3,4,5
    _fn(1)(2)(3,4,5);   // print: 1,2,3,4,5
    _fn(1,2)(3,4)(5);   // print: 1,2,3,4,5
    _fn(1)(2)(3)(4)(5); // print: 1,2,3,4,5
